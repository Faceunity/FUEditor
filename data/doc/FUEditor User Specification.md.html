<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>FUEditor User Specification.md</title><link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}.CodeMirror { height: auto; }
.CodeMirror-scroll { overflow-y: hidden; overflow-x: auto; }
.CodeMirror-lines { padding: 4px 0px; }
.CodeMirror pre { }
.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { background-color: white; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); background-color: rgb(247, 247, 247); white-space: nowrap; }
.CodeMirror-linenumbers { }
.CodeMirror-linenumber { padding: 0px 3px 0px 5px; text-align: right; color: rgb(153, 153, 153); }
.CodeMirror div.CodeMirror-cursor { border-left: 1px solid black; z-index: 3; }
.CodeMirror div.CodeMirror-secondarycursor { border-left: 1px solid silver; }
.CodeMirror.cm-keymap-fat-cursor div.CodeMirror-cursor { width: auto; border: 0px; background: rgb(119, 238, 119); z-index: 1; }
.CodeMirror div.CodeMirror-cursor.CodeMirror-overwrite { }
.cm-tab { display: inline-block; }
.cm-s-typora-default .cm-header, .cm-s-typora-default .cm-property { color: rgb(217, 79, 138); }
.cm-s-typora-default pre.cm-header1:not(.cm-atom) :not(.cm-overlay) { font-size: 2rem; line-height: 2rem; }
.cm-s-typora-default pre.cm-header2:not(.cm-atom) :not(.cm-overlay) { font-size: 1.4rem; line-height: 1.4rem; }
.cm-s-typora-default .cm-atom, .cm-s-typora-default .cm-number { color: rgb(149, 132, 134); }
.cm-s-typora-default .cm-table-row, .cm-s-typora-default .cm-block-start { font-family: monospace; }
.cm-s-typora-default .cm-comment, .cm-s-typora-default .cm-code { color: rgb(74, 90, 159); font-family: monospace; }
.cm-s-typora-default .cm-tag { color: rgb(169, 68, 66); }
.cm-s-typora-default .cm-string { color: rgb(126, 134, 169); }
.cm-s-typora-default .cm-link { color: rgb(196, 122, 15); text-decoration: underline; }
.cm-s-typora-default .cm-variable-2, .cm-s-typora-default .cm-variable-1 { color: inherit; }
.cm-s-typora-default .cm-overlay { font-family: monospace; }
.CodeMirror.cm-s-typora-default div.CodeMirror-cursor { border-left: 3px solid rgb(228, 98, 154); }
.cm-s-typora-default .CodeMirror-activeline-background { left: -60px; right: -30px; background: rgba(204, 204, 204, 0.2); }
.cm-s-typora-default .CodeMirror-gutters { border-right: none; background-color: inherit; }
.cm-s-typora-default .cm-trailing-space-new-line::after, .cm-startspace::after, .cm-starttab .cm-tab::after { content: "•"; position: absolute; left: 0px; opacity: 0; font-family: LetterGothicStd, monospace; }
.os-windows .cm-startspace::after, .os-windows .cm-starttab .cm-tab::after { left: -0.1em; }
.cm-starttab .cm-tab::after { content: " "; }
.cm-startspace, .cm-tab, .cm-starttab, .cm-trailing-space-a, .cm-trailing-space-b, .cm-trailing-space-new-line { font-family: monospace; position: relative; }
.cm-s-typora-default .cm-trailing-space-new-line::after { content: "↓"; opacity: 0.3; }
.cm-s-inner .cm-keyword { color: rgb(119, 0, 136); }
.cm-s-inner .cm-atom, .cm-s-inner.cm-atom { color: rgb(34, 17, 153); }
.cm-s-inner .cm-number { color: rgb(17, 102, 68); }
.cm-s-inner .cm-def { color: rgb(0, 0, 255); }
.cm-s-inner .cm-variable { color: black; }
.cm-s-inner .cm-variable-2 { color: rgb(0, 85, 170); }
.cm-s-inner .cm-variable-3 { color: rgb(0, 136, 85); }
.cm-s-inner .cm-property { color: black; }
.cm-s-inner .cm-operator { color: rgb(152, 26, 26); }
.cm-s-inner .cm-comment, .cm-s-inner.cm-comment { color: rgb(170, 85, 0); }
.cm-s-inner .cm-string { color: rgb(170, 17, 17); }
.cm-s-inner .cm-string-2 { color: rgb(255, 85, 0); }
.cm-s-inner .cm-meta { color: rgb(85, 85, 85); }
.cm-s-inner .cm-qualifier { color: rgb(85, 85, 85); }
.cm-s-inner .cm-builtin { color: rgb(51, 0, 170); }
.cm-s-inner .cm-bracket { color: rgb(153, 153, 119); }
.cm-s-inner .cm-tag { color: rgb(17, 119, 0); }
.cm-s-inner .cm-attribute { color: rgb(0, 0, 204); }
.cm-s-inner .cm-header, .cm-s-inner.cm-header { color: blue; }
.cm-s-inner .cm-quote, .cm-s-inner.cm-quote { color: rgb(0, 153, 0); }
.cm-s-inner .cm-hr, .cm-s-inner.cm-hr { color: rgb(153, 153, 153); }
.cm-s-inner .cm-link, .cm-s-inner.cm-link { color: rgb(0, 0, 204); }
.cm-negative { color: rgb(221, 68, 68); }
.cm-positive { color: rgb(34, 153, 34); }
.cm-header, .cm-strong { font-weight: bold; }
.cm-del { text-decoration: line-through; }
.cm-em { font-style: italic; }
.cm-link { text-decoration: underline; }
.cm-error { color: rgb(255, 0, 0); }
.cm-invalidchar { color: rgb(255, 0, 0); }
.cm-constant { color: rgb(38, 139, 210); }
.cm-defined { color: rgb(181, 137, 0); }
div.CodeMirror span.CodeMirror-matchingbracket { color: rgb(0, 255, 0); }
div.CodeMirror span.CodeMirror-nonmatchingbracket { color: rgb(255, 34, 34); }
.cm-s-inner .CodeMirror-activeline-background { background: inherit; }
.CodeMirror { position: relative; overflow: hidden; }
.CodeMirror-scroll { margin-bottom: -30px; margin-right: -30px; padding-bottom: 30px; padding-right: 30px; height: 100%; outline: none; position: relative; box-sizing: content-box; }
.CodeMirror-sizer { position: relative; }
.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler { position: absolute; z-index: 6; display: none; }
.CodeMirror-vscrollbar { right: 0px; top: 0px; overflow-x: hidden; overflow-y: scroll; }
.CodeMirror-hscrollbar { bottom: 0px; left: 0px; overflow-y: hidden; overflow-x: scroll; }
.CodeMirror-scrollbar-filler { right: 0px; bottom: 0px; }
.CodeMirror-gutter-filler { left: 0px; bottom: 0px; }
.CodeMirror-gutters { position: absolute; left: 0px; top: 0px; padding-bottom: 30px; z-index: 3; }
.CodeMirror-gutter { white-space: normal; height: 100%; box-sizing: content-box; padding-bottom: 30px; margin-bottom: -32px; display: inline-block; }
.CodeMirror-gutter-wrapper { position: absolute; z-index: 4; background: none !important; border: none !important; }
.CodeMirror-gutter-background { position: absolute; top: 0px; bottom: 0px; z-index: 4; }
.CodeMirror-gutter-elt { position: absolute; cursor: default; z-index: 4; }
.CodeMirror-lines { cursor: text; }
.CodeMirror pre { border-radius: 0px; border-width: 0px; background: transparent; font-family: inherit; font-size: inherit; margin: 0px; white-space: pre; word-wrap: normal; color: inherit; z-index: 2; position: relative; overflow: visible; }
.CodeMirror-wrap pre { word-wrap: break-word; white-space: pre-wrap; word-break: normal; }
.CodeMirror-code pre { border-right: 30px solid transparent; width: fit-content; }
.CodeMirror-wrap .CodeMirror-code pre { border-right: none; width: auto; }
.CodeMirror-linebackground { position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px; z-index: 0; }
.CodeMirror-linewidget { position: relative; z-index: 2; overflow: auto; }
.CodeMirror-widget { }
.CodeMirror-wrap .CodeMirror-scroll { overflow-x: hidden; }
.CodeMirror-measure { position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden; }
.CodeMirror-measure pre { position: static; }
.CodeMirror div.CodeMirror-cursor { position: absolute; visibility: hidden; border-right: none; width: 0px; }
.CodeMirror div.CodeMirror-cursor { visibility: hidden; }
.CodeMirror-focused div.CodeMirror-cursor { visibility: inherit; }
.CodeMirror-selected { background: rgb(217, 217, 217); }
.CodeMirror-focused .CodeMirror-selected { background: rgb(215, 212, 240); }
.cm-searching { background: rgba(255, 255, 0, 0.4); }
.CodeMirror span { }
@media print {
  .CodeMirror div.CodeMirror-cursor { visibility: hidden; }
}
.CodeMirror-lint-markers { width: 16px; }
.CodeMirror-lint-tooltip { background-color: infobackground; border: 1px solid black; border-radius: 4px; color: infotext; font-family: monospace; overflow: hidden; padding: 2px 5px; position: fixed; white-space: pre-wrap; z-index: 10000; max-width: 600px; opacity: 0; transition: opacity 0.4s; font-size: 0.8em; }
.CodeMirror-lint-mark-error, .CodeMirror-lint-mark-warning { background-position: left bottom; background-repeat: repeat-x; }
.CodeMirror-lint-mark-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg=="); }
.CodeMirror-lint-marker-error, .CodeMirror-lint-marker-warning { background-position: center center; background-repeat: no-repeat; cursor: pointer; display: inline-block; height: 16px; width: 16px; vertical-align: middle; position: relative; }
.CodeMirror-lint-message-error, .CodeMirror-lint-message-warning { padding-left: 18px; background-position: left top; background-repeat: no-repeat; }
.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII="); }
.CodeMirror-lint-marker-multiple { background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC"); background-repeat: no-repeat; background-position: right bottom; width: 100%; height: 100%; }


:root { --bg-color: #ffffff; --text-color: #333333; --code-block-bg-color: inherit; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { background: rgb(181, 214, 252); text-shadow: none; }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
.typora-export #write { margin: 0px auto; }
#write > p:first-child, #write > ul:first-child, #write > ol:first-child, #write > pre:first-child, #write > blockquote:first-child, #write > div:first-child, #write > table:first-child { margin-top: 30px; }
#write li > table:first-child { margin-top: -20px; }
img { max-width: 100%; vertical-align: middle; }
input, button, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
::before, ::after, * { box-sizing: border-box; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write div, #write pre { width: inherit; }
#write p, #write h1, #write h2, #write h3, #write h4, #write h5, #write h6 { position: relative; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.typora-export p { white-space: normal; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0rem; -webkit-margin-after: 0rem; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: bold; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; margin: 4px 0px 0px; }
figure { max-width: 100%; overflow-x: auto; margin: 0px; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: var(--code-block-bg-color); position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences .CodeMirror.CodeMirror-wrap { top: -1.6em; margin-bottom: -1.6em; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.CodeMirror-line { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; padding-top: 1em; padding-bottom: 1em; }
.footnotes + .footnotes { margin-top: -1em; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: transparent; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: normal; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li p, li .mathjax-block { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; }
@media print {
  html, body { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  h1, h2, h3, h4, h5, h6 { break-after: avoid-page; orphans: 2; }
  p { orphans: 4; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0mm; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 2.86rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
p .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: none; box-shadow: none; }
.task-list { list-style-type: none; }
.task-list-item { position: relative; padding-left: 1em; }
.task-list-item input { position: absolute; top: 0px; left: 0px; }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc::after, .md-toc-content::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: bold; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
.md-tag { opacity: 0.5; }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: monospace; }
code { text-align: left; }
h1 .md-tag, h2 .md-tag, h3 .md-tag, h4 .md-tag, h5 .md-tag, h6 .md-tag { font-weight: initial; opacity: 0.35; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: none !important; background: transparent !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0em; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: normal; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; }


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 4px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border-width: 0px 0px 1px; border-style: none none solid; border-top-color: initial; border-right-color: initial; border-left-color: initial; border-image: initial; overflow: hidden; box-sizing: content-box; border-bottom-color: rgb(221, 221, 221); }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(221, 221, 221); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(204, 204, 204); margin: 0px; padding: 0px; }
table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(204, 204, 204); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.task-list { padding-left: 0px; }
.task-list-item { padding-left: 32px; }
.task-list-item input { top: 3px; left: 8px; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border: 1px solid rgb(221, 221, 221); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }






</style>
</head>
<body class='typora-export' >
<div  id='write'  class = 'is-node'><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n2"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n2"><strong>FUEditor 使用文档</strong></a></span><span class="md-toc-item md-toc-h2" data-ref="n3"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n3">简介</a></span><span class="md-toc-item md-toc-h2" data-ref="n17"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n17">1. 快速安装</a></span><span class="md-toc-item md-toc-h2" data-ref="n50"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n50">2. 使用</a></span><span class="md-toc-item md-toc-h4" data-ref="n51"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n51">2.1 新建项目</a></span><span class="md-toc-item md-toc-h4" data-ref="n62"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n62">2.2 2D道具编辑</a></span><span class="md-toc-item md-toc-h4" data-ref="n202"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n202">2.3 2D动画逻辑</a></span><span class="md-toc-item md-toc-h4" data-ref="n300"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n300">2.4 特定脸部动作</a></span><span class="md-toc-item md-toc-h6" data-ref="n305"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n305">2.4.1 内置特定动作</a></span><span class="md-toc-item md-toc-h6" data-ref="n346"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n346">2.4.2 自定义脸部动作</a></span><span class="md-toc-item md-toc-h4" data-ref="n352"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n352">2.5 手势动作</a></span><span class="md-toc-item md-toc-h4" data-ref="n382"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n382">2.6 组动画</a></span><span class="md-toc-item md-toc-h6" data-ref="n383"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n383">2.6.1 添加组动画</a></span><span class="md-toc-item md-toc-h6" data-ref="n385"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n385">2.6.2 元素组构成</a></span><span class="md-toc-item md-toc-h6" data-ref="n402"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n402">2.6.3 调整组元素顺序</a></span><span class="md-toc-item md-toc-h2" data-ref="n408"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n408">3. AR Mesh 制作</a></span><span class="md-toc-item md-toc-h4" data-ref="n409"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n409">3.1 普通AR Mesh贴图制作</a></span><span class="md-toc-item md-toc-h4" data-ref="n432"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n432">3.2 高级换脸功能</a></span><span class="md-toc-item md-toc-h2" data-ref="n450"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n450">4. 静态3D道具制作</a></span><span class="md-toc-item md-toc-h4" data-ref="n452"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n452">4.1 道具制作</a></span><span class="md-toc-item md-toc-h4" data-ref="n493"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n493">4.2 材质调整</a></span><span class="md-toc-item md-toc-h5" data-ref="n673"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n673">4.2.1 材质复制粘贴</a></span><span class="md-toc-item md-toc-h4" data-ref="n676"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n676">4.3 贴图动画</a></span><span class="md-toc-item md-toc-h4" data-ref="n696"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n696">4.4 3D道具水平翻转</a></span><span class="md-toc-item md-toc-h2" data-ref="n700"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n700">5. 动画制作</a></span><span class="md-toc-item md-toc-h2" data-ref="n719"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n719">6. Avatar制作</a></span><span class="md-toc-item md-toc-h2" data-ref="n742"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n742">7. 人像驱动</a></span><span class="md-toc-item md-toc-h4" data-ref="n743"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n743">7.1 简介</a></span><span class="md-toc-item md-toc-h4" data-ref="n746"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n746">7.2 效果</a></span><span class="md-toc-item md-toc-h4" data-ref="n750"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n750">7.3 使用方法</a></span><span class="md-toc-item md-toc-h4" data-ref="n758"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n758">7.4 人像驱动道具制作</a></span><span class="md-toc-item md-toc-h2" data-ref="n762"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n762">8. 高级视频滤镜</a></span><span class="md-toc-item md-toc-h2" data-ref="n766"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n766">9. 打包道具</a></span><span class="md-toc-item md-toc-h2" data-ref="n790"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n790">10. 项目保存与切换</a></span><span class="md-toc-item md-toc-h2" data-ref="n803"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n803">11. 高级功能自定义动画脚本</a></span><span class="md-toc-item md-toc-h2" data-ref="n806"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n806">12.自定义模板</a></span><span class="md-toc-item md-toc-h2" data-ref="n821"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n821">13. 实时预览</a></span><span class="md-toc-item md-toc-h2" data-ref="n838"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n838">14. 工具</a></span><span class="md-toc-item md-toc-h2" data-ref="n843"><a class="md-toc-inner" style="cursor: pointer;" href="#header-n843">15. 常用术语解释</a></span></p></div><h1><a name='header-n2' class='md-header-anchor '></a><strong>FUEditor 使用文档</strong></h1><h2><a name='header-n3' class='md-header-anchor '></a>简介</h2><p><strong>FUEditor</strong> 是一款高效便捷的AR人脸道具编辑工具软件，为<a href='www.faceunity.com'>Faceunity</a>公司的Nama SDK提供支持。<br/></p><ul><li>可以高效制作2D道具。贴纸，贴纸动画，动画组，特定脸部动作触发动画。Faceunity的2D贴纸技术本质也是3D的，有前后景深效果，侧脸时仍能紧贴人脸，而不是全部贴纸都在一个平面上。<br/></li><li>可以制作AR Mesh面具。<br/></li><li>可以制作3D的道具，调整材质，如花环头盔等。<br/>
<img src='./img/gif.gif' alt='xxx' /></li></ul><h2><a name='header-n17' class='md-header-anchor '></a>1. 快速安装</h2><ul><li><p>系统要求<br/></p><ul><li>win7/8/10 64位电脑</li><li>摄像头，推荐使用 Logitech C920
-FUEditor无须安装可直接使用，将FUEditor.zip解压到系统适当位置。
-目录结构解释<br/></li></ul></li></ul><pre class="md-fences md-end-block" lang="c" style="break-inside: unset;"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-operator">+</span><span class="cm-variable">FUEdittor\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//FUEditor根目录</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-variable">FUEditor</span>.<span class="cm-variable">bat</span> &nbsp; &nbsp; &nbsp;<span class="cm-comment">//双击点击，启动FUEditor</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">bins\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//FUEditor程序库</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">data\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//FUEditor数据目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">log\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//FUEditor运行日志</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">Projects\</span> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//所有道具项目的目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">daoju1\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//道具“daoju1”项目目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-variable">daoju1</span>.<span class="cm-variable">fuproj</span> &nbsp; <span class="cm-comment">//道具项目“daoju1”工程文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">build\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//已签名道具bundle（测试证书）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">release\</span> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//已签名道具bundle（正式证书）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">zip\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//未签名压缩包</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">fcopy\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//自定义内容目录，用于自定义脚本</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">out\</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-comment">//临时文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">daoju2</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//道具“daoju2”项目目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">-</span><span class="cm-variable">daoju2</span>.<span class="cm-variable">fuproj</span> &nbsp; <span class="cm-comment">//道具项目“daoju2”工程文件</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-operator">+</span><span class="cm-variable">daoju3</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="cm-comment">//道具“daoju3”项目目录</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ...</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 414px;"></div><div class="CodeMirror-gutters" style="display: none; height: 444px;"></div></div></div></pre><ul><li><p>启动程序<br/>
双击 FUEditor 目录中 FUEditor.bat 启动程序。显示最近项目列表，可以选择以前的项目，也可以新建项目。</p><p> <img src='./img/start.png' alt='test' /></p></li></ul><ul><li><p>查看example  <br/>
FUEditor中自带一些示例项目，首次启动时，显示的项目即是示例项目，在最近项目列表中鼠标左键选择打开‘example_2D’项目。<br/></p><p><img src='./img/choice.png' alt='test' /><br/></p><p>​</p></li></ul><p> 进入示例项目，点击<img src='./img/qt32/play.png' alt='test' />按钮启动摄像头，点击<img src='./img/qt32/refresh.png' alt='test' />开始预览。<img src='./img/example.png' alt='test' /><br/></p><h2><a name='header-n50' class='md-header-anchor '></a>2. 使用</h2><h4><a name='header-n51' class='md-header-anchor '></a>2.1 新建项目</h4><ul><li><p>创建：点击菜单<strong>File</strong>&gt;&gt;<strong>New Project</strong>，或者快捷键<strong>Ctrl+N</strong>，或者点击左上边按钮<img src='./img/qt32/document-add.png' alt='test' />。弹出对话框，选择创建项目类型，输入项目名称</p><p><img src='./img/createproject.png' alt='test' /><br/></p></li></ul><p> 创建完新项目后，界面左上角会显示<strong>FUEditor – 项目名</strong>，项目存放在 <em>FUEditor/Projects/项目名/</em> 目录下。<br/>
<strong>注意</strong>：所有道具项目存放在 <em>FUEditor/Projects</em> 目录下，新建项目时不要重名。道具名称命名最好以“公司名缩写_设计师名缩写_道具名”规范来命名，如“fu_crt_maolian”。道具名最好不要和之前的一样，否则会覆盖掉之前打包好的道具。<br/>
<em>FUEditor/Projects</em> 目录下由程序创建的目录不要随意动。</p><h4><a name='header-n62' class='md-header-anchor '></a>2.2 2D道具编辑</h4><ul><li>添加：点击2D类型下&quot;<strong>+</strong>&quot;号创建新的元素；或者在&quot;<strong>2D</strong>&quot;上右键选择&quot;<strong>添加子元素</strong>&quot;；或者选中&quot;<strong>2D</strong>&quot;，点击下面<img src='./img/qt32/add.png' alt='test' />按钮添加新元素。<br/></li><li>删除：点击<img src='./img/qt32/remove.png' alt='test' />删除当前选中的元素。或者在元素上点右键，选择&quot;<strong>删除</strong>&quot;。    <img src='./img/2daddremove.png' alt='test' /></li></ul><ul><li>2D元素属性：<br/>
修改查看元素的属性，在视窗中选择道具元素，或者再树状元素列表中选择元素，右边会显示对应的元素属性视图  <img src='./img/attr.png' alt='test' /><br/></li></ul><ul><li><p>基本属性释意：</p><ul><li><p>元素名：当前元素的名称，可修改，不同元素元素名不同。</p></li><li><p>图片：点击右边图片按钮<img src='./img/qt32/image.png' alt='test' />，选择图片纹理，图片文件名不能是中文。<br/>
<strong>注意</strong>：2D元素帧动画序列命名必须是“xxxx_五位数字.扩展名” 例如， xxxx_00000.png, xxxx_00001.png 帧序列，<br/>
即使没有帧动画，只有一帧也需命名为xxxx_00000.png。图片最大不能超过2000×2000。图片太大，会影响性能,建议控制在1000×1000以下。<br/></p></li><li><p>水平翻转：沿元素中心做水平翻转。</p></li><li><p>垂直翻转：沿元素中心做垂直翻转。<br/></p></li><li><p><strong>元素类型</strong>:<br/></p><ul><li>跟随人脸元素: 跟随人脸的元素，将跟踪人脸移动或旋转。</li><li>屏幕元素：屏幕元素，不会跟人脸动，不拉伸，直接绘制在屏幕。不同屏幕分辨率按照(rx,ry)在屏幕上绘制元素，(rx,ry)表示元素中心在屏幕上的比例，左上角为(0,0),右下角为(1,1)。<br/></li><li>背景分割元素：背景分割元素，选择该模式的元素可以在相机画面中自动分割出人像，并替换背景为该元素内容。<br/>
<strong>注意</strong>：2D道具的group不能作为背景分割元素，只能用单个道具做背景分割。<br/></li><li>全屏前景元素：全屏前景元素，不会跟人脸动，高宽拉伸绘制在全屏幕。<br/></li><li>全屏背景元素：全屏背景元素，不会跟人脸动，高宽拉伸绘制在全屏幕。</li></ul></li><li><p><strong>旋转类型</strong>:<br/></p><ul><li>旋转平移: 跟随人脸的元素，将跟踪人脸移动和旋转。</li><li>仅平移：跟随人脸的元素，跟随人脸平移运动，但不旋转。<br/></li></ul></li><li><p>是否横屏：当元素是全屏元素时，才能选择该选项，且为横屏模式，不会跟人脸动，拉伸绘制在全屏幕。参见[横屏支持]章节。</p></li><li><p>xyz：元素的位置，可直接输入；也可以在窗口中拖动，鼠标放到坐标轴上，按住鼠标左键拖动即可。</p></li><li><p>保持图片宽高比：勾选，让元素保持原来图片的宽高比约束，调整宽或高会自动调整另一个值。取消后可自由调整宽高。</p></li><li><p>宽度：元素宽度。</p></li><li><p>高度：元素高度。<br/></p></li><li><p>开启深度测试：当2D元素和3D元素混合使用时，给2D元素开启深度测试，能获得正确的遮挡效果。<br/></p></li></ul><p><img src='./img/anim.png' alt='test' /><br/></p></li><li><p>动画参数释意：</p><ul><li>FPS：播放帧速率，每秒播放多少帧。</li><li>触发开始：当前道具从什么时候开始绘制。</li><li>触发开始动作：当前道具在什么人脸表情动作下触发时开始绘制。</li><li>是否需要保持动作：勾选时，且触发开始为“特定人脸表情动作”时，需要人脸保持某一动作，才能持续绘制道具元素。</li><li>循环类型：当前道具的循环播放类型。</li><li>触发结束：但特定条件满足时，结束当前道具元素绘制。</li><li>触发结束动作：当前道具在什么人脸表情动作下触发时停止绘制。<br/></li><li><strong>结束后触发</strong>: 结束触发表示当前元素结束时，激活触发其他已经结束的元素，点击右边按钮进行操作，可以用来做动画循环。例如 元素A，A的触发开始是[人脸出现]，触发结束是[特定动作X];元素B，B的触发开始是[特定动作X]且需要保持动作，<strong>结束后触发</strong>[A];那这动画是正常情况下播放A动画，当出现特定动作X时，A暂时关闭，播放B动画，B结束时，重新激活触发A，回到正常状态。<br/></li><li><strong>是否由其他元素触发</strong>: (配合上面结束后触发)当元素设置为被触发时，即使这个元素是始终绘制(屏幕初始化)的也得等，其他元素结束触发它。用于做动画序列的。<br/></li><li><strong>是否仅活跃一次</strong>：如果设置为是，那么满足触发条件，触发道具播放，当满足结束条件(特定动作、循环N次)该道具元素结束播放，结束后将不再重新触发。如果没设置为是，那么触发结束后，人脸离开屏幕再回来又能触发该元素播放。<br/></li></ul></li></ul><p> <strong>注 1</strong>：具体动画逻辑参见2.3 <strong>2D动画逻辑</strong> 章节<br/>
 <strong>注 2</strong>：当出现，全屏元素没有覆盖满全屏时，需要设置isAndroid参数，Android/iOS客户端程序里也需要fuItemSetParamd做相应的设置，否则放到手机里预览不是预期的效果<br/></p><pre class="md-fences md-end-block" lang="c"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"isAndroid"</span>,<span class="cm-number">1</span>); &nbsp; &nbsp; <span class="cm-comment">//第一个参数为bundleid，。</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 53px;"></div></div></div></pre><p> <strong>注 3</strong>：背景元素以及全屏元素，在集成的Nama SDK版本大于4.0.0时，全屏元素会自动跟随人脸的旋转而旋转，如果需要在道具加载时就固定了方向，要调整方向，需要在代码中调整旋转角度，调用</p><pre class="md-fences md-end-block" lang="c"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">/*</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">/ 第一个参数为bundleid，最后参数为旋转度数 0，90，180，270。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">/ 每加90度相当于逆时针旋转90度。</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationAngle"</span>,<span class="cm-number">90</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">eg</span>.</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationAngle"</span>,<span class="cm-number">90</span>);<span class="cm-comment">//Android 前置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationAngle"</span>,<span class="cm-number">270</span>);<span class="cm-comment">//Android 后置</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationAngle"</span>,<span class="cm-number">0</span>);<span class="cm-comment">//非Android 平台</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 207px;"></div><div class="CodeMirror-gutters" style="display: none; height: 237px;"></div></div></div></pre><p> <strong>注 4</strong>：判断道具是否结束，需要客户端主动查询道具的状态：</p><pre class="md-fences md-end-block" lang="c"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">var</span> <span class="cm-variable">ret1</span> <span class="cm-operator">=</span> <span class="cm-variable">fuItemGetParamd</span>(<span class="cm-number">1</span>,<span class="cm-string">"hasFinish"</span>);<span class="cm-comment">//是否有（仅活跃一次）的元素已经结束了</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">var</span> <span class="cm-variable">ret2</span> <span class="cm-operator">=</span> <span class="cm-variable">fuItemGetParamd</span>(<span class="cm-number">1</span>, <span class="cm-string">"allFinish"</span>);<span class="cm-comment">//是否 全部的（仅活跃一次）的元素已经结束了</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> <span class="cm-variable">console</span>.<span class="cm-variable">log</span>(<span class="cm-variable">ret1</span>, <span class="cm-variable">ret2</span>);</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 69px;"></div><div class="CodeMirror-gutters" style="display: none; height: 99px;"></div></div></div></pre><ul><li><strong>横屏支持</strong>：<br/>
2D属性&quot;<strong>是否横屏</strong>&quot;选择，只适用于全屏元素，勾选后。
 在预览区，点击鼠标右键，在弹出框中选择横屏预览。<br/>
<strong>注</strong>：一旦预览框选择对应的预览模式后，跟预览框模式不一样的全屏元素将不显示，仅仅是不显示，切换模式后将重新显示，打包正常。 <br/></li></ul><p> <strong>注</strong>：程序使用时，在加载道具后，默认竖屏模式，但需要切换横屏时，需要调用代码,</p><pre class="md-fences md-end-block" lang="c"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"isLandscape"</span>,<span class="cm-number">1</span>); &nbsp; &nbsp; <span class="cm-comment">//第一个参数为bundleid，最后参数 0-竖屏 ，1-横屏。</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 53px;"></div></div></div></pre><p>上述 <strong>isLandscape</strong> 参数只是切换纹理图，如果旋转方向不对，需要再调用下面代码，设置rotationTexAngle，该参数仅旋转纹理图片：<br/></p><pre class="md-fences md-end-block" lang="c"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationTexAngle"</span>,<span class="cm-number">90</span>); &nbsp; &nbsp; <span class="cm-comment">//逆时针旋转90度</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationTexAngle"</span>,<span class="cm-number">180</span>); &nbsp; &nbsp; <span class="cm-comment">//逆时针旋转90度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationTexAngle"</span>,<span class="cm-number">270</span>); &nbsp; &nbsp; <span class="cm-comment">//逆时针旋转90度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationTexAngle"</span>,<span class="cm-number">360</span>); &nbsp; &nbsp; <span class="cm-comment">//逆时针旋转90度</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-variable">item_id</span>, <span class="cm-string">"rotationTexAngle"</span>,<span class="cm-operator">-</span><span class="cm-number">90</span>); &nbsp; &nbsp; <span class="cm-comment">//顺时针旋转90度</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 115px;"></div><div class="CodeMirror-gutters" style="display: none; height: 145px;"></div></div></div></pre><h4><a name='header-n202' class='md-header-anchor '></a>2.3 2D动画逻辑</h4><p>单个元素，表示道具包中可编辑的最小单元。以下按照&quot;<strong>触发开始</strong>&quot;不同类型分类，描述各种不同条件下的动画逻辑。</p><ul><li><p><strong>触发开始</strong> - <strong>人脸出现</strong>：在出现人脸的时候，开始绘制元素，适用于需要人脸的元素。【当 &quot;触发结束&quot; 或者 &quot;循环类型&quot; 触发了结束后，暂时结束道具绘制，不管是否有人脸，当再次出现人脸时（有-&gt;无-&gt;有），再次绘制道具】。</p></li><li><p>触发结束 - 默认：正常按照循环类型进行绘制。 <br/></p><ul><li>循环类型 - 无限循环：则一直绘制该元素直到人脸消失，人脸出现时又重新绘制。</li><li>循环类型 - 循环N次：循环绘制该元素N次(循环N次)，N 次后停止 该绘制该元素，暂停该道具。</li><li>循环类型 - 循环1次并停留：播放道具一个循环后，停在最后一帧。</li></ul></li><li><p>触发结束 - 人脸出现：【未定义操作】</p></li><li><p>触发结束 - 屏幕初始化：【未定义操作】</p></li><li><p>触发结束 - 特定脸部动作：按循环类型进行绘制，如触发特定脸部动作,停止当前元素，暂停该道具。</p><ul><li>循环类型 - 无限循环：则一直绘制该元素直到人脸消失。</li><li>循环类型 - 循环N次：循环绘制该元素N次(循环N次)，N次后停止该绘制该元素，暂停该道具。</li><li>循环类型 - 循环1次并停留：播放该元素一个循环后，停在最后一帧。</li></ul></li></ul><ul><li><p><strong>触发开始</strong> - <strong>屏幕初始化</strong>：道具加载后，立即绘制，无须人脸出现，适用于一些全屏或背景元素。【当 &quot;触发结束&quot; 或者 &quot;循环类型&quot; 触发了结束后，暂时结束道具绘制，不管是否有人脸。再次从有人脸到无人脸时（有/无-&gt;有-&gt; 无），再次绘制道具】</p><ul><li><p>触发结束 - 默认：无特殊触发条件，按照循环类型逻辑。</p><ul><li>循环类型 - 无限循环：一直绘制该元素，无论人脸有无。</li><li>循环类型 - 循环N次： 循环绘制该元素N次(循环N次)，N次后停止该绘制该元素，暂停绘制，等待下次有脸到无脸的切换。</li><li>循环类型 - 循环1次并停留：播放道具一个循环后，停在最后一帧。</li></ul></li><li><p>触发结束 - 人脸出现：当人脸出现时，暂停绘制，等待下次有脸到无 脸的切换。当没有人脸出现时，按照循环类型控制逻辑。</p></li><li><p>触发结束 - 屏幕初始化【未定义操作】</p></li><li><p>触发结束 - 特定脸部动作：当出现特定人脸动作时，暂停绘制，等待下次 有脸到无脸的切换。当没有人脸出现时，按照循环类型控制逻辑。</p></li></ul></li></ul><ul><li><p><strong>触发开始</strong> - <strong>特定脸部动作</strong>：道具加载后，需等特定人脸动作FaceActtionStart出现才触发元素绘制。适用于一些与人脸表情动作相关的元素。</p><ul><li><p><strong>是否需要保持动作</strong> 选项：优先判断条件，当勾选时，人脸需要一直做着&quot;触发开始动作&quot;动作，才能保持元素绘制；不勾选时只要做一次&quot;触发开始动作&quot;触发，便开始绘制元素，开始绘制后，逻辑按循环类型以及触发结束来。</p></li><li><p>触发结束 - 默认：无特殊触发条件，按<strong>是否需要保持</strong>特定脸部动作优先条件判断是否绘制。如绘制按照循环类型逻辑。</p><ul><li>循环类型 - 无限循环：一直绘制该元素。</li><li>循环类型 - 循环N次：循环绘制该元素N次(循环N次)，N次后停止该绘制该元素。当脸部动作&quot;触发开始动作&quot;再次被触发时，能够再次绘制。</li><li>循环类型 - 循环1次并停留：播放道具一个循环后，停在最后一帧。</li></ul></li><li><p>触发结束 - 人脸出现【未定义操作】</p></li><li><p>触发结束 - 屏幕初始化【未定义操作】</p></li><li><p>触发结束 - 特定脸部动作，当出现特定人脸动作特定脸部动作End时，停止绘制元素，当脸部动作FaceActtionStart再次被触发时，再次绘制。当没有特定人脸特定脸部动作End出现时，按needtokeep特定脸部动作优先条件判断是否绘制，如果绘制按照循环类型控制逻辑。<br/></p></li></ul></li></ul><hr /><h4><a name='header-n300' class='md-header-anchor '></a>2.4 特定脸部动作</h4><p>当道具元素选择触发开始类型为：&quot;特定脸部动作&quot;，然后在触发开始动作列表中选择一个动作，能够根据人脸的特定表情触发元素播放。<br/></p><p><img src='./img/action.png' alt='test' /><br/></p><h6><a name='header-n305' class='md-header-anchor '></a>2.4.1 内置特定动作</h6><ul><li>&quot;taimei&quot; 是判断用户 抬眉毛的动作<img src='./img/bq/01.png' alt='test' /><br/></li><li>&quot;taizuijiao_zuo&quot;是判断用户 抬左边嘴角的动作<img src='./img/bq/02.png' alt='test' /><br/></li><li>&quot;taizuijiao_you&quot;是判断用户 抬右边嘴角的动作<img src='./img/bq/03.png' alt='test' /><br/></li><li>&quot;nu&quot;是判断用户 怒的动作<img src='./img/bq/04.png' alt='test' /><br/></li><li>&quot;zuixing_o&quot; 为嘴型O形<img src='./img/bq/06.png' alt='test' /><br/></li><li>&quot;zuixing_a&quot; 为嘴型A形<img src='./img/bq/05.png' alt='test' /> <br/></li><li>&quot;zuixing_du&quot; 为嘴型嘟嘴形状<img src='./img/bq/07.png' alt='test' /><br/></li><li>&quot;zuixing_min&quot; 为嘴型抿嘴形状<img src='./img/bq/08.png' alt='test' /><br/></li><li>&quot;zuixing_guqi&quot; 为嘴型鼓气形状<img src='./img/bq/09.png' alt='test' /> <br/></li><li>&quot;biyan_zuo&quot; 为闭左眼<img src='./img/bq/10.png' alt='test' /><br/></li><li>&quot;biyan_you&quot; 为闭右眼<img src='./img/bq/11.png' alt='test' /> <br/></li><li>&quot;zhuantou_zuo&quot; 为头往左边转<img src='./img/bq/12.png' alt='test' /> <br/></li><li>&quot;zhuantou_you&quot; 为头往右边转<img src='./img/bq/13.png' alt='test' /><br/></li></ul><h6><a name='header-n346' class='md-header-anchor '></a>2.4.2 自定义脸部动作</h6><p>其中 &quot;触发开始动作&quot; 用户可以自定义。定义动作的文件为FUEditor/data/tools/actions.json。文件内容如下，是一个json文件，actions是一个数组，定义了上面图中所示的动作列表，每一个动作有name属性，name最终会显示在界面上。condition属性为具体判断条件，这里的condition是js脚本的条件语句。params.expression数长度为46，对应的46个表情通道，具体对应《Blendshape制作教程》。
例如</p><pre class="md-fences md-end-block" lang=""> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  "actions": [</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "name": "taimei",</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "condition": "params.expression[16] &gt;= 0.4 || params.expression[17] &gt;= 0.4 || params.expression[18] &gt;= 0.4"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "name": "taizuijiao_zuo",</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  "condition": "params.expression[24] &gt;= 0.4 || params.expression[28] &gt;= 0.4"</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  },</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp;  ………..</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ]</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 322px;"></div><div class="CodeMirror-gutters" style="display: none; height: 352px;"></div></div></div></pre><hr /><h4><a name='header-n352' class='md-header-anchor '></a>2.5 手势动作</h4><p>当道具元素选择触发开始类型为：&quot;手势动作&quot;，然后在手势列表中选择一个手势，能够根据特定手势触发元素播放。<br/></p><p><img src='./img/hand.png' alt='test' /><br/></p><p>内置5种手势：<br/></p><ul><li>thumb是翘起大拇指<br/></li><li>six是6的手势<br/></li><li>cute是用手靠近脸侧横向握拳<br/></li><li>push是手掌往外推<br/></li><li>hold是手掌往上<br/></li></ul><p>手势跟随：<br/></p><p>在元素类型选择“跟随手势”即可在手势元素触发时跟随<br/></p><p><img src='./img/follow_hand.png' alt='test' /><br/></p><hr /><h4><a name='header-n382' class='md-header-anchor '></a>2.6 组动画</h4><h6><a name='header-n383' class='md-header-anchor '></a>2.6.1 添加组动画</h6><p>创建组：<br/>
 <img src='./img/group.png' alt='test' /><br/>
 创建子元素：<br/>
 <img src='./img/group-add.png' alt='test' /><br/></p><h6><a name='header-n385' class='md-header-anchor '></a>2.6.2 元素组构成</h6><p>元素组由组的根节点以及组内元素构成：</p><ul><li>组的根节点，控制该组动画逻辑，组的动画逻辑如上定义单个元素的控制逻辑。</li><li>组内元素，只能设置在当前组内循环次数N，循环结束后，开始组内下一节点的动画。</li><li>组内最后一个元素，可以设置在当前组内循环次数N，循环结束后重新进入根节点逻辑；也可以设置为&quot;无限循环&quot;，这样前面的元素播放完后，开始无限循环最后一个，例入一群蝴蝶往头上飞，到头上后停在头上煽动翅膀，飞动画播放一次，停下来煽动无限循环。</li></ul><h6><a name='header-n402' class='md-header-anchor '></a>2.6.3 调整组元素顺序</h6><p>组动画的播放顺序由在元素列表先后顺序决定，点击右键可以调整元素前后关系<br/></p><p> <img src='./img/group-up.png' alt='test' /><br/></p><hr /><h2><a name='header-n408' class='md-header-anchor '></a>3. AR Mesh 制作</h2><h4><a name='header-n409' class='md-header-anchor '></a>3.1 普通AR Mesh贴图制作</h4><p>AR Mesh 是拟合人脸的一个3D的mesh, 当需要制作&quot;面具&quot;，可以使用该功能。</p><ul><li>创建：点击列表中&quot;AR Mesh&quot;下&quot;+&quot;创建新的元素。</li><li>删除：右键点击&quot;删除&quot;删除当前选中的元素。</li><li>调整：可以通过右键调整元素的先后顺序。<br/>
<strong>注</strong>：支持多层 AR mesh，前后关系由在序列中先后顺序决定。<br/></li></ul><p>AR Mesh 纹理制作方法：</p><ul><li>方法一：可以使用 FUEditor/data/ref/ar_demo3.obj 在 3d max/maya 等工具中进行 UV 映射，制作贴图。</li><li>方法二：参考 FUEditor/data/ref/ default_ar.png 或 reference_head.png，根据 UV 图 FUEditor/data/ref/ ar-uv.png （半透明可叠加）在 PS 等工具中制作贴图。<br/></li></ul><h4><a name='header-n432' class='md-header-anchor '></a>3.2 高级换脸功能</h4><p>换脸使用方法：<br/></p><ul><li>选择图片：点击“换脸”行的图片选择按钮<img src='./img/qt32/image.png' alt='test' />，图片文件名不能是中文，选择一张人脸图片，操作类似下图所示：    <img src='./img/changeface.png' alt='test' /></li></ul><ul><li><p>高级融合：勾选高级融合选项开启高级融合人脸功能。（仅换脸能够使用该功能）<br/></p></li><li><p>高精度网格：勾选高精度网格选项生成一张高分辨率人脸。（勾选高分辨率需要开启高级融合，否则会导致贴图错误）。<br/></p><p><strong>注意:</strong> 开启 <strong>高精度网格</strong> 功能时，Android/iOS/PC客户端需要加载<strong>ardata_ex.bundle</strong>  ，否则会崩溃。</p><pre class="md-fences md-end-block" lang="c++"> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">//c++</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">vector</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">char</span><span class="cm-operator">&gt;</span> <span class="cm-variable">bundlebyte</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">string</span> <span class="cm-variable">bundlepath</span> <span class="cm-operator">=</span> <span class="cm-variable">mdh</span>.<span class="cm-variable">m_data_path</span> <span class="cm-operator">+</span> <span class="cm-string">"/ref/ardata_ex.bundle"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-atom">false</span> <span class="cm-operator">==</span> <span class="cm-variable">loadbinary</span>(<span class="cm-variable">bundlepath</span>, <span class="cm-variable">bundlebyte</span>)){</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">loge</span>(<span class="cm-string">"load bundle failed:%s\n"</span>, <span class="cm-variable">bundlepath</span>.<span class="cm-variable">c_str</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">else</span> {</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">//load ardata_ex.bundle</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">fuLoadExtendedARData</span>(<span class="cm-variable">bundlebyte</span>.<span class="cm-variable">data</span>(), <span class="cm-variable">bundlebyte</span>.<span class="cm-variable">size</span>());</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">bundlebyte</span>.<span class="cm-variable">clear</span>();</span></pre></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 253px;"></div><div class="CodeMirror-gutters" style="display: none; height: 283px;"></div></div></div></pre></li></ul><h2><a name='header-n450' class='md-header-anchor '></a>4. 静态3D道具制作</h2><p>Faceunity Nama SDK拥有实时跟踪三维人脸的能力，能够实时推算人脸在相机空间中的坐标以及人头的三维模型。所以可以根据<a href='#8-'>参考人头</a>制作3D道具。obj原模型放在&quot;<em>FUEditor/data/ref/ar_demo3</em>&quot;,制作3D模型时可以参考该模型大小进行制作。首先要制作模型准备素材，再使用FUEditor进行预览打包，以及调整材质。</p><h4><a name='header-n452' class='md-header-anchor '></a>4.1 道具制作</h4><ul><li><p>模型制作<br/>
根据参考人头obj，在3D Max/Maya等三维建模软件中制作想要的道具,最后导出obj文件。下面以maya为例，</p><ol start='' ><li>一定要导出材质和组<br/>
材质在导出之后肯定是要重新调整过的，但是编辑器仍然需要知道 Maya 里哪些面 绑的材质是一样的，哪些面是不一样的。要不然到编辑器里所有的面就会合到一起， 不能分开调了。组也是一样的道理。<br/>
<strong>注</strong>：一个组内只能使用一个材质。    <br/>
 <img src='./img/mayae.png' alt='maya export' /><br/></li><li>一定要对着参考人头调好模型大小，对于道具更要调整好位置<br/>
导入参考人头到maya中<br/>
<img src='./img/mayai.png' alt='maya import' /><br/>
编辑器有一定的位置和大小调整功能，但如果道具小了/大了几十倍上百倍肯定就不行了。<br/>
<img src='./img/mayam.png' alt='maya model' /><br/></li></ol></li><li><p>创建3D项目<br/></p><ol start='' ><li>点击创建项目，项目类型选择3D，输入项目名称，点击&quot;OK&quot;创建项目。<br/>
<img src='./img/c3d.png' alt='create 3d project' /><br/></li><li>创建新的3D元素：在项目&quot;<strong>元素列表</strong>&quot;中点击&quot;<strong>3D</strong>&quot;类别下&quot;<strong>+</strong>&quot;，创建新的3D元素。<br/></li><li>加载obj：在&quot;<strong>属性列表</strong>&quot;中，网格项中点击右边按钮，在弹出对话框中选择需要加载的obj。<br/>
<img src='./img/n3d.png' alt='load obj' />      <img src='./img/objload.png' alt='load obj' /><br/></li></ol><p> <strong>注</strong>：在导出的obj的材质mtl，最好也导出贴图信息，并确保路径正确。<br/></p><p> 加载fbx：在&quot;<strong>属性列表</strong>&quot;中，网格项中点击右边按钮，在弹出对话框中选择需要加载的fbx文件。
 <img src='./img/nfb.png' alt='load fbx' /></p></li></ul><h4><a name='header-n493' class='md-header-anchor '></a>4.2 材质调整</h4><p>FUEditor默认采用&quot;<strong>GGX</strong>&quot;光照模型。<br/>
在预览视图中选择要调整的部件或者在项目列表选择部件。选中右边会显示该部件的属性信息。<br/>
在项目列表中选择&quot;<strong>Global Params</strong>&quot;,右边会显示全局参数属性信息。  <br/></p><ul><li><p>全局参数<br/></p><ul><li>&quot;tex_light_probe&quot;:环境图<br/></li><li>&quot;envmap_shift&quot;：环境图的旋转角度<br/></li><li>&quot;envmap_fov&quot;: 环境图的视角</li><li>&quot;log_scale&quot;：道具整体缩放的比例，用对数调节是为了方便<br/></li><li>&quot;eyeRscale&quot;：眼球左右旋转的倍率</li><li>&quot;L0_yaw&quot;：主光的航向角，也就是左右转的那个角<br/></li><li>&quot;L0_pitch&quot; 主光的俯仰角，也就是上下转的那个角<br/></li><li>&quot;L0_R&quot;：主光的颜色，R通道<br/></li><li>&quot;L0_G&quot;：主光的颜色，G通道<br/></li><li>&quot;L0_B&quot;：主光的颜色，B通道<br/></li><li>&quot;L0Intensity&quot;: 主光的强度，用对数调还是为了方便</li><li>&quot;L1_yaw&quot;：补光的航向角，也就是左右转的那个角</li><li>&quot;L1_pitch&quot;：补光的俯仰角，也就是上下转的那个角</li><li>&quot;L1_R&quot;：补光的颜色，R通道<br/></li><li>&quot;L1_G&quot;：补光的颜色，G通道<br/></li><li>&quot;L1_B&quot;：补光的颜色，B通道<br/></li><li>&quot;TexFPS&quot;：贴图动画的帧率，需要子部件的 tex_albedo 选择成动画帧 xxx_00000.png, xxx_00001.png ...  <br/></li><li>&quot;L1Intensity&quot;: 主光的强度，用对数调还是为了方便</li><li>&quot;alphaThreshold&quot;：半透明算法阈值，设为1.0适合普通简单的半透明物体，设为0.5适合头发。<br/></li><li>&quot;is_fix_x&quot;: 在有人脸的情况下，是否固定位置,不跟随人脸运动，固定位置如下fixed_x。<br/></li><li>&quot;is_fix_y&quot;: 在有人脸的情况下，是否固定位置,不跟随人脸运动，固定位置如下fixed_y。<br/></li><li>&quot;is_fix_z&quot;: 在有人脸的情况下，是否固定位置,不跟随人脸运动，固定位置如下fixed_xz。<br/></li><li>&quot;fixed_x&quot;:在有人脸的时候的固定位置 ,x. <br/></li><li>&quot;fixed_y&quot;:在有人脸的时候的固定位置 ,y. <br/></li><li>&quot;fixed_z&quot;:在有人脸的时候的固定位置 ,z,z 向里，越大越远. <br/></li><li>&quot;isnofacerender&quot;:在没有人脸的时候是否绘制, 如果绘制那么以下面的点为固定点。<br/></li><li>&quot;fixed_nx&quot;:在没有人脸的时候的固定位置 ,x. <br/></li><li>&quot;fixed_ny&quot;:在没有人脸的时候的固定位置 ,y. <br/></li><li>&quot;fixed_nz&quot;:在没有人脸的时候的固定位置 ,z,z 向里，越大越远. <br/></li><li>&quot;use_fov&quot;:是否使用自定义的FOV，注意AR模式下不能使用这个参数，AR模式下调整fov需要通过客户端调用fuFocallengthscalse接口调整fov大小。  <br/></li><li>&quot;camera_fov&quot;:投影fov大小，需要先开启“use_fov”。<br/></li><li>&quot;rot_weight&quot;:控制旋转的幅度，rot_weight=控制旋转的幅度，rot_weight=0不跟人头旋转。 </li><li>&quot;expr_clamp&quot;:默认不打开，当客户端的SDK的表情系数范围会小于0，大于1时，而且会出现模型表情过于夸张，或者模型穿刺时，希望把表情系数裁剪到（0,1）范围时，打开此开关。 </li></ul></li><li><p>部件材质参数：</p><ul><li><p>&quot;obj_type&quot;:物体的类型</p><ul><li>一是镂空[0,0.25]</li><li>二是会完全随着脑袋旋转和缩放,(0.25,0.5]</li><li>三是权重控制旋转的幅度（前提是有对应主obj的weight.png,例如aa.obj对应的权重贴图是aa_weight.png）,(0.5,0.75]</li><li>四是只会跟着脑袋位移变化和大小的缩放，例如身体(0.75,1]。<br/></li></ul></li><li><p>&quot;tex_normal&quot;: 法向贴图，就是蓝了吧唧的那种，不是bump map哦～bump map要先转一下哦～～ 默认的grey.png等于没有贴图<br/></p></li><li><p>&quot;normal_strength&quot;：法向贴图的强度，为了照顾没有法向贴图的模型，强度默认是0，所以设了法向贴图之后要把强度拽高点才能看到效果<br/></p></li><li><p>&quot;tex_albedo&quot;：颜色贴图，会自动加载obj对应材质库mtl中Ka_map，如没有Ka_map,默认的white.png是白的，需要选择部件对应的贴图。如要做出3D贴纸动画，这里tex_albedo选择成动画帧序列的某一帧即可 xxx_00000.png, xxx_00001.png ...，命名规范和2D动画帧一致，必须是xxx_00000开始，系统会自动加载所有帧并完成帧动画逻辑。</p></li><li><p>&quot;Ka&quot;: 自发光强度</p></li><li><p>&quot;Kd&quot;：漫反射强度</p></li><li><p>&quot;Ks&quot;：高光强度，注意高光不受颜色贴图影响</p></li><li><p>&quot;Kr&quot;：环境图反射强度</p></li><li><p>&quot;roughness&quot;：表面粗糙度。越大高光越分散，越小高光越集中</p></li><li><p>&quot;tex_smoothness&quot;：高光强度贴图。在alpha通道里放的是影响高光和反射的权重，越大表示越亮。可以和颜色贴图放在一起哦。</p></li><li><p>&quot;has_tex_smoothness&quot;：高光强度贴图的整体强度（有些拗口……），为了照顾到大多数没有高光强度贴图的模型，默认是0。设了贴图之后要把强度拽高哦～</p></li><li><p>&quot;ior&quot;：环境图反射的折射率。折射率越小，反射从正面到边光的亮度变化越明显，整体强度越小。</p></li><li><p>&quot;F0&quot;：高光的金属度。越高越接近金属，越低越接近塑料。</p></li><li><p>&quot;is_eye&quot;：是眼睛就拽到右边，不是就拽到左边。是眼睛则会随眼球转动<br/></p></li><li><p>&quot;is_hair&quot;：是头发胡子就拽到右边，不是就拽到左边。是头发则会加入透明处理<br/></p></li></ul></li></ul><p><strong>注</strong>：调整材质参数可以分为两种情况：</p><ul><li>1 当实时预览未开启时，这时调整参数是看不到直接的结果</li><li>2 在加载完模型，并调整好位置了之后，可以&quot;打包bundle&quot;,并开启实时预览窗口，这个时候，再进行参数调整时，将能够实时的看到调整的结果，最终调整完时，需要重新&quot;打包bundle&quot;,确保调节好的参数能够打包到bundle里面。<br/></li></ul><h5><a name='header-n673' class='md-header-anchor '></a>4.2.1 材质复制粘贴</h5><p>部件材质参数支持拷贝粘贴，具体做法是在具体部件的材质列别上点击右键，选择“复制全部参数”，然后到另一个部件上，选择“粘贴全部参数”，实现全部全部材质信息的拷贝。需要注意的是：复制和粘贴的过程，tex_albedo等贴图材质信息也会复制，如果不是使用相同的贴图，那么复制粘贴后，需要重新设置贴图信息。<br/></p><h4><a name='header-n676' class='md-header-anchor '></a>4.3 贴图动画</h4><p>FUEditor 3D道具支持循环贴图动画，类似于2D贴纸动画，可以创建一些贴合脸部的3D模型，并使用贴纸动画，使得贴纸动画更具立体感。<br/>
在预览视图中选择要调整的部件或者在项目列表选择部件。选中右边会显示该部件的属性信息。<br/>
在项目列表中选择&quot;<strong>Global Params</strong>&quot;,右边会显示全局参数属性信息。  <br/></p><ul><li><p>全局参数<br/></p><ul><li>&quot;TexFPS&quot;：贴图动画的帧率<br/></li></ul></li><li><p>部件材质参数：</p><ul><li>&quot;tex_albedo&quot;：颜色贴图，会自动加载obj对应材质库mtl中Ka_map，如没有Ka_map,默认的white.png是白的，需要选择部件对应的贴图。如要做出3D贴纸动画，这里tex_albedo选择成动画帧序列的某一帧即可 xxx_00000.png, xxx_00001.png ...，命名规范和2D动画帧一致，必须是xxx_00000开始，系统会自动加载所有帧并完成帧动画逻辑，而3D贴纸帧序列可以UV展开绘制。<br/></li></ul></li></ul><h4><a name='header-n696' class='md-header-anchor '></a>4.4 3D道具水平翻转</h4><p>当需要对3D道具进行水平翻转时，需要在客户端调用如下代码：<br/></p><pre class="md-fences md-end-block" lang="c  "> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable">fuItemSetParamd</span>(<span class="cm-number">2</span>,<span class="cm-string">'is3DFlipH'</span>,<span class="cm-number">1</span>);</span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 53px;"></div></div></div></pre><h2><a name='header-n700' class='md-header-anchor '></a>5. 动画制作</h2><p> FUEditor支持FBX格式骨骼动画，基本流程：首先添加‘3D’网格模型，网格模型载入支持.obj .fbx格式，再添加FBX骨骼动画并绑定到对应的‘3D’网格模型上，设置好骨骼动画元素的触发动画逻辑即可。</p><ul><li>添加FBX动画<br/>
在项目元素列表中点击&quot;<strong>Anim</strong>&quot;下的&quot;<strong>+</strong>&quot;添加一个骨骼动画元素，在右侧&quot;<strong>属性列表</strong>&quot;中，骨骼项中点击右边按钮，在弹出对话框中选择需要加载的fbx文件加载fbx动画。<br/>
 <img src='./img/nfba.png' alt='load anim' /><br/></li><li>绑定骨骼动画<br/></li></ul><p>当加载了fbx动画以后，需要将动画绑定到对应的网格模型（3D项），操作如图：<br/>
   <img src='./img/fbxbind.png' alt='bind fbx' /><br/></p><p><strong>注1</strong>：如需绑定动画则必须对应到正确的网格模型，拓扑一致，否则会导致无法打包。例如：3D元素使用了obj格式导入，那么绑定的动画需要有相同的拓扑结构（即使用相同的obj在maya/max中绑定骨骼系统）。<br/>
<strong>注2</strong>：骨骼不能有缩放变换，并且影响每个顶点的骨骼数不能超过8根，否则会导致动画错乱。<br/>
<strong>注3</strong>：骨骼动画元素的‘触发动画逻辑’和3D道具相同。<br/></p><h2><a name='header-n719' class='md-header-anchor '></a>6. Avatar制作</h2><p>Avatar指的是3D模型，且脸部有跟Nama SDK一致的<a href='#8-'>Blendshape/Morpher</a>，能够被Nama SDK驱动，进行脸部动画跟踪的模型。</p><ul><li>与静态3D道具相异之处：需要一组blendshape obj。<br/></li><li>obj的命名规范，每个表情对应一个obj（命名为<strong>bsx.obj</strong>，x为序列号），可以只做其中的一部分，如下图所示：<br/>
<img src='./img/bsobj.png' alt='blendshape' /><br/></li></ul><p> 其中 bs0.obj 是自然表情。拓扑结构需要保证这些obj的顶点顺序、面顺序、人头位置都是一样的。&quot;<em>FUEditor/data/doc/blendshape</em>_<em>guide</em>&quot; 目录下脚本 exportObj.mel 可以帮助把maya的blendshape导出成obj文件。如果使用这个script，需要保证每个blendshape表情的名字规范为*bs0.obj、*bs1.obj、*bs2.obj、*bs3.obj、…、*bs46.obj。<br/></p><ul><li>导入avatar模型的步骤：启动FUEditor.exe，创建3D项目，点击加载模型网格，选择 <strong>bs0.obj</strong> 导入，剩下的obj工具会自动加载进去。<strong>注意</strong>：必须选择 <strong>bs0.obj</strong>。 <br/></li><li>制作blendshape时需要注意：自然表情保持全部肌肉放松，不要有笑容等表情变化；其他表情需要在自然表情的基础上修改，只修改需要的部分即可，例如制作闭左眼的表情，右眼等其他部分要与自然表情完全相同。<br/></li><li>自然表情和46种表情，参见&quot;<em>FUEditor/data/doc/blendshape</em>_<em>guide</em>&quot;目录下的 <strong>Blendshape_Guide.pdf</strong>。</li></ul><h2><a name='header-n742' class='md-header-anchor '></a>7. 人像驱动</h2><h4><a name='header-n743' class='md-header-anchor '></a>7.1 简介</h4><p>Picasso让照片活起来的技术。用户选择一张照片，经过自动的人脸重建，头发分割后，新的“照片”就能够实时驱动起来，也可以播放预制好的表情动画，制作成表情包。</p><h4><a name='header-n746' class='md-header-anchor '></a>7.2 效果</h4><p>以下是最终的效果示例，从左到右分别是原图，动作1，动作2。<br/>
<img src='./img/p030.png' alt='p03' /></p><h4><a name='header-n750' class='md-header-anchor '></a>7.3 使用方法</h4><ul><li>加载picasso.bundle</li><li>需要带有picasso的权限的证书<br/></li></ul><h4><a name='header-n758' class='md-header-anchor '></a>7.4 人像驱动道具制作</h4><p>在创建项目时，项目类型选择“Picasso”，输入项目名，创建工程。再选择图片，等待生成内容。需要联网，大概需要等待几秒，内容生成完后，进行打包预览即可。
<img src='./img/picasso1.png' alt='p03' /><br/></p><h2><a name='header-n762' class='md-header-anchor '></a>8. 高级视频滤镜</h2><p>高级视频滤镜功能，需要在启动FUEditor时，选择相关Filter类型项目，或者创建Filter类型的项目。<br/>
<strong>注</strong>: 进入2D/3D道具编辑功能后无法切换到Filter项目，需要重新打开FUEditor。</p><h2><a name='header-n766' class='md-header-anchor '></a>9. 打包道具</h2><p>道具编辑修改完成后，需要进行打包操作。<br/>
2D项目支持2D元素和AR Mesh混合打包。<br/>
打包会自动保存项目。<br/></p><p><strong>测试打包、正式打包</strong>：</p><ul><li>签名的证书分为两种，测试证书，以及正式证书，测试证书签出来的bundle，有一定时效性，运行一段时间后会消失。而正式证书签名的bundle可以一直运行。<br/></li><li>FUEditor内置了测试证书，通过 <img src='./img/debug.png' alt='test' /> 打包出来的bundle即是测试bundle。测试bundle：点击&quot;打包bundle&quot;按钮，等待打包，道具打包后在&quot;FUEditor/Projects/当前道具/<strong>build</strong>/&quot;目录中。<br/></li><li>测试打包又可以分为两个过程，一是&quot;<strong>测试-生成</strong>&quot;,生成过程即是将图片等资源进行转换；一是&quot;<strong>测试-签名</strong>&quot;，将转换好的资源进行加密打包。当需要修改一些临时脚本时，可以只&quot;<strong>测试-生成</strong>&quot;一次，多次修改生成的内容并多次&quot;<strong>测试-签名</strong>&quot;，这样可以节省生成时的耗时。<br/></li><li>通过 <img src='./img/release.png' alt='test' /> 打包出来的bundle即是正式发布bundle，道具打包后在“FUEditor/Projects/当前道具/<strong>release</strong>/”目录中。<br/>
<strong>注：</strong> 1.正式发布前需要确保测试打包正常。2.正式发布需要<strong>网络连接</strong>，需要正式证书。</li><li>点击<img src='./img/dir.png' alt='test' /> 直接打开当前项目目录。</li></ul><h2><a name='header-n790' class='md-header-anchor '></a>10. 项目保存与切换</h2><ul><li>点击<img src='./img/qt32/notes.png' alt='test' /> ，保存当前项目xxxx，工程文件在Project/xxxx/xxxx.fuproj。保存后可以打开重新读取。</li><li>点击<img src='./img/qt32/fork.png' alt='test' /> ，在弹出的对话框中输入新项目名xxxx2，点击确认另存为。当前的项目会另存为到Project/xxxx2下，同时切换到新的项目上工作，左上角显示FUEditor-xxxx2。</li><li>点击<img src='./img/qt32/folder-duplicate.png' alt='test' />在Projects目录中选择要打开的项目，最后选择xxx<strong>.fuproj</strong>文件打开，如下图</li></ul><p> <img src='./img/openp.png' alt='test' /></p><h2><a name='header-n803' class='md-header-anchor '></a>11. 高级功能自定义动画脚本</h2><p>编辑完道具后，选择&quot;测试&quot;并点击&quot;打包bundle&quot;<img src='./img/debug.png' alt='test' />，FUEditor开始打包测试用的bundle，并且，会在&quot;<em>out</em>&quot;目录下生成待打包的资源，包括script.js。script.js是控制道具动画的逻辑。可以通过修改script.js能高度自定义道具动画。当需要进行脚本修改，或者添加其他资源文件时。可以在项目的&quot;<em>fcopy</em>&quot;中放置需要添加的文件，以后每次打包(测试/发布)时，FUEditor会主动将&quot;<em>fcopy</em>&quot;目录下的文件拷贝或者覆盖到&quot;<em>out</em>&quot;目录中，并最终打包到bundle内。<br/></p><h2><a name='header-n806' class='md-header-anchor '></a>12.自定义模板</h2><p>在目录FUEditor\data\tools\templates保存有预设的模板可供使用，选择模板只对3d道具有效果，2d道具无论选择何种模板效果都是一样的，同样的模板也不会影响filter项目和picasso项目。  <br/></p><p>在新建项目时选择对应的模板名即可使用相应的模板，不同的模板下模型可以调节的材质参数是不同的，用户可以自己制作模板放入该目录下即可在新建项目时使用，simple模板是最简单的模板采用phong光照模型，自定义模板可以参考simple模板进行制作，default模板则是默认模板，光照模型用的是默认的ggx。<br/></p><p><img src='./img/template.png' alt='test' /><br/></p><p>default模板下的材质参数<br/></p><p><img src='./img/example_default.png' alt='test' />   <br/></p><p>simple模板下的材质参数<br/></p><p><img src='./img/example_simple.png' alt='test' /><br/></p><p>cartoon模板下的材质参数<br/></p><p><img src='./img/example_cartoon.png' alt='test' /><br/></p><p>animoji模板和simple模板材质参数是一样的<br/></p><h2><a name='header-n821' class='md-header-anchor '></a>13. 实时预览</h2><ul><li>打开摄像头，点击 <img src='./img/qt/play.png' alt='test' />按钮。</li><li>暂停播放，点击 <img src='./img/qt/pause.png' alt='test' />按钮。</li><li>多摄像头切换，点击选择菜单“摄像头”，在“相机列表”中选择对应的摄像头。</li><li>选择本地视频作为输入视频，点击选择菜单“摄像头”，点击“捕捉视频文件”，选择视频文件。</li><li>关闭释放摄像头，选择菜单“摄像头”，点击“关闭相机”。<br/></li></ul><h2><a name='header-n838' class='md-header-anchor '></a>14. 工具</h2><ul><li><strong>表情夸张转换</strong>：将旧avatar数据，转换为新avatar数据，保证在关闭表情系数限制后，avatar混合表情正确。点击菜单栏&quot;<em>工具</em>&quot;，点击&quot;<em>表情夸张转换</em>&quot;，选择旧bundle，在自动转换后，将使用测试证书自动打包，点击刷新按钮可以看到效果。确认无误，请自行发布打包。<br/></li></ul><h2><a name='header-n843' class='md-header-anchor '></a>15. 常用术语解释</h2><ul><li><p><strong>道具项目</strong>：表示用户创建的每一个道具工程，项目存放在 <em>FUEditor/Projects/项目名/</em> 目录下。</p></li><li><p><strong>元素</strong>：元素表示由用户创建的每一个道具部件，如2D项目的一个矩形片，一张AR Mesh，一个3D部件。</p></li><li><p><strong>bundle/item</strong>：生成资源，经过zip压缩后，再进行签名加密得到的文件。后缀名为.bundle</p></li><li><p><strong>测试证书签名、正式证书签名</strong>:<br/></p><ul><li>签名的证书分为两种，测试证书，以及正式证书，测试证书签出来的bundle，有一定时效性，运行一段时间后会消失,测试包的使用时间一般为两分钟左右，之后会导致人脸识别失败并报“debug key used, 100 frames remaining，debug key or authentication failed, rendering stopped”之类的错误。。而正式证书签名的bundle可以一直运行。<br/></li><li>FUEditor内置了测试证书，通过<img src='./img/debug.png' alt='test' />打包出来的bundle即是测试bundle。</li><li>通过<img src='./img/release.png' alt='test' />打包出来的bundle即是正式发布bundle。当软件交付给客户时，同时会给客户一个唯一的证书，请将证书放到 &quot;FUEditor/data/license/&quot;目录下，并命名为&quot;<strong>license.p12</strong>&quot;，用于发布道具。<br/>
<strong>注意1:</strong> <img src='./img/release.png' alt='test' />打包发布bundle时，该功能只进行签名，不会进行内容生成。因此，需要通过<img src='./img/debug.png' alt='test' />打包以后，确认无误后，在进行发布打包。<br/>
<strong>注意2:</strong> 该证书是客户身份的证明，每个公司客户都有一个不同的证书，不同的客户证书不同。不得将该证书转给其他公司使用，如有，经监控发现，将永久吊销证书。</li></ul></li><li><p><strong>参考人头</strong>：Faceunity Nama SDK拥有实时跟踪三维人脸的能力，能够实时推算人脸在相机空间中的坐标以及人头的三维模型。FUEditor中内置的参考人头模型，即是最后实时跟踪时人头的大小。obj原模型放在&quot;<em>FUEditor/data/ref/ar_demo3</em>&quot;,制作3D模型时可以参考该模型大小进行制作。</p></li><li><p><strong>Avatar</strong>:avatar指的是3D模型，且脸部有跟Nama SDK一致的Blendshape，能够被Nama SDK驱动，进行脸部动画跟踪的模型。</p></li><li><p><strong>Blendshape/Morpher</strong>:表情融合模型，在3ds Max中称morpher，maya中称blendshape。计算公式如下：<br/>
<img src='./img/bs.png' alt='blenshape formula' /><br/>
其中，Bk是指每一个blendshape，B0是指自然基表情，coef是指有Nama SDK提供的每一帧视频提取出来46个表情系数。</p></li></ul><hr /><pre class="md-fences md-end-block" lang=""> <div class="CodeMirror cm-s-inner CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 30px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 30px; width: 1px; border-bottom: 0px solid transparent; top: 23px;"></div><div class="CodeMirror-gutters" style="display: none; height: 53px;"></div></div></div></pre></div>
</body>
</html>